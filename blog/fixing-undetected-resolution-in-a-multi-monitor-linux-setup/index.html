<!doctype html><html lang=en-us>
<head>
<meta charset=utf-8>
<meta http-equiv=x-ua-compatible content="IE=edge">
<meta name=viewport content="width=device-width,initial-scale=1">
<meta name=author content="Sumesh Premraj">
<link rel="shortcut icon" type=image/x-icon href=https://sumesh.work/img/favicon.ico>
<title>Fixing undetected resolution in a multi-monitor Linux setup | Sumesh Premraj's Homepage</title>
<meta name=description content="After upgrading to Fedora, I was unable to run my Dell laptop on a dock connected to two monitors properly. One of the screens would refuse to run at its maximum resolution.
It took me a while, but adding the resolution manually with xrandr and playing around with X configuration files fixed the issue.
Adding new resolution with xrandr Run xrandrto identify the screens by name. Note these names, they&rsquo;ll be used in X conf files and for xrandr commands later.">
<link href=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css rel=stylesheet integrity=sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl crossorigin=anonymous>
<link rel="preload stylesheet" href=/css/main.min.css as=style>
<link rel=stylesheet type=text/css href=https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css>
<link rel=stylesheet type=text/css href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:200,400,200bold,400old">
<link rel=stylesheet href=https://sumesh.work/css/custom.css><!--[if lt IE 9]><script src=https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js></script>
<script src=https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js></script><![endif]-->
<script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga('create','G-SWFN0GVHN6','auto'),ga('send','pageview'))</script>
<script async src=https://www.google-analytics.com/analytics.js></script>
</head>
<body>
<div id=content>
<div class="container mb-3">
<nav class="navbar navbar-expand-lg">
<div class=container-fluid>
<a class=navbar-brand href=https://sumesh.work/>
<i class="fa fa-home"></i> Sumesh Premraj
</a>
<button class=navbar-toggler type=button data-bs-toggle=collapse data-bs-target=#navbar aria-controls=navbar>
<i class="fa fa-bars"></i>
</button>
<div id=navbar class="collapse navbar-collapse">
<ul class="navbar-nav ms-auto mb-2 mb-lg-0">
<li class=nav-item>
<li><a class=nav-link href=/blog/>BLOG</a></li>
</li>
<li class=nav-item>
<li><a class=nav-link href=/projects/>PROJECTS</a></li>
</li>
</ul>
</div>
</div>
</div>
</nav>
<div class=container>
<h3 class=mt-3><b><a href=https://sumesh.work/blog/fixing-undetected-resolution-in-a-multi-monitor-linux-setup/>Fixing undetected resolution in a multi-monitor Linux setup</a></b></h3>
<div class="blog-title my-4">
<h6>
July 6, 2015
&nbsp;&nbsp;
<span class="badge bg-success">linux</span>
</h6>
</div>
<div class=panel>
<div class=panel-body>
<div class=blogpost>
<p>After upgrading to Fedora, I was unable to run my Dell laptop on a dock connected to two monitors properly. One of the screens would refuse to run at its maximum resolution.</p>
<p>It took me a while, but adding the resolution manually with xrandr and playing around with X configuration files fixed the issue.</p>
<h3 id=adding-new-resolution-with-xrandr>Adding new resolution with xrandr</h3>
<p>Run xrandr to identify the screens by name. Note these names, they&rsquo;ll be used in X conf files and for xrandr commands later. In my case, it was DP1, DP1-3 and DP1-2, with the latter not running in native resolution (1920x1080).</p>
<p>Run gtf with the required resolution and refresh rate (1920 x 1080 and 60 Hz here) to generate the Modeline.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ gtf <span style=color:#ae81ff>1920</span> <span style=color:#ae81ff>1080</span> <span style=color:#ae81ff>60</span>
<span style=color:#75715e># 1920x1080 @ 60.00 Hz (GTF) hsync: 67.08 kHz; pclk: 172.80 MHz</span>
  Modeline <span style=color:#e6db74>&#34;1920x1080_60.00&#34;</span>  172.80  <span style=color:#ae81ff>1920</span> <span style=color:#ae81ff>2040</span> <span style=color:#ae81ff>2248</span> <span style=color:#ae81ff>2576</span>  <span style=color:#ae81ff>1080</span> <span style=color:#ae81ff>1081</span> <span style=color:#ae81ff>1084</span> <span style=color:#ae81ff>1118</span>  -HSync +Vsync
</code></pre></div><p>Use xrandr to add a new mode like so (named 1080p here, can be anything you want). You have to copy the line starting with Modeline, but omit the word Modeline itself:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash><span style=color:#75715e># Create new mode</span>
$ xrandr --newmode <span style=color:#e6db74>&#34;1080p&#34;</span> 172.80  <span style=color:#ae81ff>1920</span> <span style=color:#ae81ff>2040</span> <span style=color:#ae81ff>2248</span> <span style=color:#ae81ff>2576</span>  <span style=color:#ae81ff>1080</span> <span style=color:#ae81ff>1081</span> <span style=color:#ae81ff>1084</span> <span style=color:#ae81ff>1118</span>  -HSync +Vsync
<span style=color:#75715e># Add this mode to our screen</span>
$ xrandr --addmode DP1-2 1080p
<span style=color:#75715e># Change the screen to this mode</span>
$ xrandr --output DP1-2 --mode 1080p
</code></pre></div><p>Once you&rsquo;ve tested this, it is time to add this to your startup so that you don&rsquo;t have to do this manually.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cat ~/.xprofile
<span style=color:#75715e># Create new mode</span>
xrandr --newmode <span style=color:#e6db74>&#34;1080p&#34;</span> 172.80  <span style=color:#ae81ff>1920</span> <span style=color:#ae81ff>2040</span> <span style=color:#ae81ff>2248</span> <span style=color:#ae81ff>2576</span>  <span style=color:#ae81ff>1080</span> <span style=color:#ae81ff>1081</span> <span style=color:#ae81ff>1084</span> <span style=color:#ae81ff>1118</span>  -HSync +Vsync
<span style=color:#75715e># Add this mode to our screen</span>
xrandr --addmode DP1-2 1080p
<span style=color:#75715e># Change the screen to this mode</span>
xrandr --output DP1-2 --mode 1080p
</code></pre></div><h3 id=x-configuration>X configuration</h3>
<p>X usually works out of the box, but in this case, the native resolution is not being detected. The screens themselves support 1920x1080 resolution, which was tested with xrandr above, so we now specify the resolution explicitly to enable the higher resolution.</p>
<p>Specify your graphics chip and driver.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cat /etc/X11/xorg.conf.d/30-graphic.conf
Section <span style=color:#e6db74>&#34;Device&#34;</span>
    Identifier      <span style=color:#e6db74>&#34;Intel Integrated&#34;</span>
    Driver          <span style=color:#e6db74>&#34;intel&#34;</span>
EndSection
</code></pre></div><p>Specify the name and Modeline (generated above with gtf above) for the undetected screen.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cat /etc/X11/xorg.conf.d/40-monitor.conf
Section <span style=color:#e6db74>&#34;Monitor&#34;</span>
  Identifier  <span style=color:#e6db74>&#34;DP1-2&#34;</span>
  Modeline <span style=color:#e6db74>&#34;1920x1080_60.00&#34;</span>  172.80  <span style=color:#ae81ff>1920</span> <span style=color:#ae81ff>2040</span> <span style=color:#ae81ff>2248</span> <span style=color:#ae81ff>2576</span>  <span style=color:#ae81ff>1080</span> <span style=color:#ae81ff>1081</span> <span style=color:#ae81ff>1084</span> <span style=color:#ae81ff>1118</span>  -HSync +Vsync
  Option <span style=color:#e6db74>&#34;PreferredMode&#34;</span> <span style=color:#e6db74>&#34;1920x1080_60.00&#34;</span>
EndSection
</code></pre></div><p>Specify the preferred resolution for the screen.</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ cat /etc/X11/xorg.conf.d/50-screen.conf
Section <span style=color:#e6db74>&#34;Screen&#34;</span>
    Identifier <span style=color:#e6db74>&#34;DP1-2&#34;</span>
    DefaultDepth <span style=color:#ae81ff>24</span>
    SubSection <span style=color:#e6db74>&#34;Display&#34;</span>
            Depth <span style=color:#ae81ff>24</span>
            Modes <span style=color:#e6db74>&#34;1280x1024&#34;</span>  <span style=color:#e6db74>&#34;1024x768&#34;</span>   <span style=color:#e6db74>&#34;1920x1080&#34;</span>
    EndSubSection
EndSection
</code></pre></div><p>Restart X. I use GNOME 3 and GDM login manager, so I had to do this:</p>
<div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-bash data-lang=bash>$ sudo service gdm restart
</code></pre></div><p>Restart your login manager if you know it, or alternatively you can restart your system.</p>
<div class="related-posts mt-4 py-3">
<h5>Related Posts</h5>
<div class=row>
<div class=col-4>
<h6 style=text-align:right>
February 21, 2015
</h6>
</div>
<div class=col-8>
<h6 style=text-align:left>
<b><a href=/blog/installing-arch-linux-from-scratch/>Installing Arch Linux from scratch</a></b>
</h6>
</div>
</div>
</div>
</div>
</div>
<div class=disqus>
</div>
</div>
</div>
</div>
<footer class=footer>
<div class=container>
<div class=text-muted>&copy; All rights reserved. Powered by <a href=https://gohugo.io/>Hugo</a> and
<a href=http://www.github.com/nurlansu/hugo-sustain/>sustain</a> with ♥</div>
</div>
</footer>
<script src=https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.min.js integrity=sha384-nsg8ua9HAw1y0W1btsyWgBklPnCUAFLuTMS2G72MMONqmOymq585AcH49TLBQObG crossorigin=anonymous></script>
</body>
</html>